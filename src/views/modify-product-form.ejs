<!DOCTYPE html>
<html lang="en">

<head>
   <%- include('./partials/_head.ejs') %>
   <title>Modificar Producto - Spice Node</title>
</head>

<body>
   <%- include('./partials/_navBar') %>

   <!-- Formulario de modificacion de productos -->
   <div class="ccFormularioModificar container d-flex flex-wrap flex-column align-items-center">
      <h2 class="pt-5">Modificar un producto</h2>
      <p>Por favor complete la información requerida para modificar un producto</p>
      <div class="ccDetalleModificarProducto mt-5 bg-white shadow p-5">
         <h3>Detalle del producto</h3>
         <form action="/products/<%= product.id %>?_method=PUT" method="POST" enctype="multipart/form-data">
            <div class="form-row">
               <div class="form-group col-12">
                  <label for="name">Nombre del producto</label>
                  <input type="text" name="name" id="" class="form-control" value="<%= product.name %>">
                  <small class="text-danger"><%= (typeof errors != 'undefined' && errors.productName) ? errors.productName.msg : '' %></small>
               </div>
               <div class="form-group col-12">
                  <label for="description">Descripcion</label>
                  <input type="text" name="description" id="" class="form-control" value="<%= product.description %>">
                  <small class="text-danger"><%= (typeof errors != 'undefined' && errors.productDescription) ? errors.productDescription.msg : '' %></small>
               </div>
               <div class="form-group col-12">
                  <label for="">Categoria de producto</label>
                  <input type="text" name="" id="" class="form-control" value="<%= product.Category.name %>">
                  <small class="text-danger"><%= (typeof errors != 'undefined' && errors.category) ? errors.category.msg : '' %></small>
               </div>
               <div>
                  <label for="">Categoría</label>
                  <select name="category">
                     <option value="">Elige una nueva categoría</option>
                     <% for (let i = 0; i < categories.length; i++){ %>
                     <option value="<%= categories[i].id %>  ">
                        <%= categories[i].name %>
                     </option>
                     <% } %>
                  </select>
                  <small class="text-danger"><%= (typeof errors != 'undefined' && errors.productcategories) ? errors.productcategories.msg : '' %></small>
               </div>
               <div class="form-group col-12">
                  <label for="price">Precio</label>
                  <input type="text" name="price" id="" class="form-control" value="<%= product.price %>">
                  <small class="text-danger"><%= (typeof errors != 'undefined' && errors.price) ? errors.price.msg : '' %></small>
               </div>
               <div class="form-group col-12">
                  <label for="ingredients">Ingredientes</label>
                  <h4>Ingredientes Actuales</h4>
                  <ul>
                     <% for(let i=0; i < product.Ingredientes.length; i++) { %> 
                        <li>
                           <p> <%= product.Ingredientes[i].name %> </p>
                        </li>
                     <% } %> 
                  </ul>
                  <h4> Cargá nuevos ingredientes </h4>
                  <% for(let i = 0; i < ingredients.length; i++){ %>
                  <div>
                     <label for="ingredients"><%= ingredients[i].name %></label>
                     <input type="checkbox" name="ingredients" id="" value="<%= ingredients[i].id %> ">
                  </div>
                  <% } %>
                  <small class="text-danger"><%= (typeof errors != 'undefined' && errors.productIngredients) ? errors.productIngredients.msg : '' %></small>
               </div>
               <div class="form-group col-12">
                  <label class="text-secondary" for="image">Archivos en PNG o JPEG</label>
                  <input type="file" name="image" class="form-control-file" id="">
                  <small class="text-danger"><%= (typeof errors != 'undefined' && errors.image) ? errors.image.msg : '' %></small>
               </div>
            </div>
            <button type="submit" class="btn btn-success btn-sm">Modificar producto</button>
         </form>
      </div>
   </div>

   <%- include('./partials/_bootstrapscripts.ejs') %>
</body>

</html>